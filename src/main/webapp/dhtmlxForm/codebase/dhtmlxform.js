//v.3.6 build 130619

/*
Copyright Dinamenta, UAB http://www.dhtmlx.com
You allowed to use this component or parts of it under GPL terms
To use it on other terms or get Professional edition of the component please contact us at sales@dhtmlx.com
*/
function dhtmlXForm(a,b,c){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",
center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var d=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize="13px";this._updateBlocks();this.forEachItem(function(b){d.getItemType(b)=="calendar"&&d.doWithItem(b,"setSkin",a)})};this.skinDetect=function(){var a=document.createElement("DIV");a.className="dhxform_skin_detect";document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a);
var b=a.offsetWidth;a.parentNode.removeChild(a);a=null;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[b]||null};this.skin=c||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||this.skinDetect()||"dhx_skyblue";this.separator=",";this.live_validate=!1;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=typeof a=="object"?a:document.getElementById(a);if(!a._isNestedForm)this._parentForm=!0,this.cont.style.fontSize="13px",this.cont.className="dhxform_obj_"+this.skin,
this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(a){a=a||event;if(a.keyCode==13){var b=a.target||a.srcElement;typeof b.tagName!="undefined"&&String(b.tagName).toLowerCase()=="textarea"&&!a.ctrlKey||d.callEvent("onEnter",[])}};this.b_index=null;this.base=[];this._prepare=function(a){this.b_index==null?this.b_index=0:this.b_index++;this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className=
"dhxform_base";typeof a!="undefined"&&(this.base[this.b_index].style.cssText+=" margin-left:"+a+"px!important;");this.cont.appendChild(this.base[this.b_index])};this.setSizes=function(){};this._mergeSettings=function(a){var b=-1,c={type:"settings"},d;for(d in this.idef)c[d]=this.idef[d];for(var e=0;e<a.length;e++)if(typeof a[e]!="undefined"&&a[e].type=="settings"){for(d in a[e])c[d]=a[e][d];b=e}a[b>=0?b:a.length]=c;return a};this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
d=0;d<a;d++)b+=c.charAt(Math.round(Math.random()*(c.length-1)));return b};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=this._parentForm?this._genStr(12)+"_":a._rId;this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(a,b,c,e,o,i){this.items[a]._index&&(this.getForm()._indexId.push(b),this.getForm()._idIndex[b]={ind:this.getForm()._indexId.length-1});if(!a)a=this._type;if(a=="list"&&o!=null&&this.itemPull[this.idPrefix+o]!=null&&typeof this.itemPull[this.idPrefix+o]._addSubListNode==
"function")var g=this.itemPull[this.idPrefix+o]._addSubListNode();else if(a=="newcolumn")g={};else{var l=null;if(typeof i!="undefined"&&!isNaN(i)&&a!="list")for(var i=Math.max(parseInt(i),0)+1,q=0;q<this.base[this.b_index].childNodes.length;q++)this.base[this.b_index].childNodes[q]._isNestedForm!=!0&&(i--,i==0&&(l=this.base[this.b_index].childNodes[q]));else if(a=="list")for(var p in this.itemPull)if(p==this.idPrefix+b)l=this.itemPull[p].nextSibling,this.itemPull[p]._listBase!=null&&this.itemPull[p]._listBase.length>
0&&(l=this.itemPull[p]._listBase[this.itemPull[p]._listBase.length-1]);g=document.createElement("DIV");l?this.base[this.b_index].insertBefore(g,l):this.base[this.b_index].appendChild(g)}g._idd=b;g._rId=this._rId;if(typeof g.style!="undefined"){if(typeof c.offsetLeft=="undefined"&&this.idef.offsetLeft>0)c.offsetLeft=this.idef.offsetLeft;if(typeof c.offsetTop=="undefined"&&this.idef.offsetTop>0)c.offsetTop=this.idef.offsetTop;var n="";typeof c.offsetLeft!="undefined"&&(n+=" padding-left:"+c.offsetLeft+
"px!important;");typeof c.offsetTop!="undefined"&&(n+=" padding-top:"+c.offsetTop+"px!important;");g.style.cssText+=n}if(a=="block"&&isNaN(c.blockOffset))c.blockOffset=this.idef.blockOffset;if(a=="list"){if(typeof g._ofsNested=="undefined")g._ofsNested=this.idef_const.offsetNested;if(e!=null)g._sId=e;var m=this.items[a].render(g);if(!this.itemPull[this.idPrefix+b]._listObj)this.itemPull[this.idPrefix+b]._listObj=[];if(!this.itemPull[this.idPrefix+b]._list)this.itemPull[this.idPrefix+b]._list=[];if(!this.itemPull[this.idPrefix+
b]._listBase)this.itemPull[this.idPrefix+b]._listBase=[];this.itemPull[this.idPrefix+b]._listObj.push(m[0]);this.itemPull[this.idPrefix+b]._list.push(m[1]);this.itemPull[this.idPrefix+b]._listBase.push(g);m[1].checkEvent=function(a){return d.checkEvent(a)};m[1].callEvent=function(a,b){return d.callEvent(a,b)};m[1].getForm=function(){return d.getForm()};m[1]._initObj(this._mergeSettings(c));g._inBlcok&&(g.className+=" in_block");return m[1]}if(a=="newcolumn")this._prepare(c.offset);else{if(a=="label"&&
this._ic++==0)c._isTopmost=!0;c.position=this.apos_css[!c.position||!this.apos_css[c.position]?this.idef.position:c.position];g.className=c.position+(typeof c.className=="string"?" "+c.className:"");if(!c.labelWidth)c.labelWidth=this.idef.labelWidth;if(!c.labelHeight)c.labelHeight=this.idef.labelHeight;if(typeof c.wrap!="undefined")c.wrap=this._s2b(c.wrap);c.labelAlign=this.align_css[c.labelAlign]?this.align_css[c.labelAlign]:this.align_css[this.idef.labelAlign];c.inputWidth=c.width?c.width:c.inputWidth?
c.inputWidth:this.idef.inputWidth;if(!c.inputHeight)c.inputHeight=this.idef.inputHeight;if(typeof c.note!="undefined"){if(c.note.length!=null&&c.note[0]!=null)c.note=c.note[0];if(typeof c.note.width=="undefined")c.note.width=this.idef.noteWidth;if(c.note.width=="auto")c.note.width=c.inputWidth}g.checkEvent=function(a){return d.checkEvent(a)};g.callEvent=function(a,b){return d.callEvent(a,b)};g.getForm=function(){return d.getForm()};g._autoCheck=function(a){d._autoCheck(a)};if(typeof c.readonly=="string")c.readonly=
this._s2b(c.readonly);if(typeof c.autoStart=="string")c.autoStart=this._s2b(c.autoStart);if(typeof c.autoRemove=="string")c.autoRemove=this._s2b(c.autoRemove);if(typeof c.titleScreen=="string")c.titleScreen=this._s2b(c.titleScreen);if(typeof c.info=="string")c.info=this._s2b(c.info);if(typeof c.hidden=="string")c.hidden=this._s2b(c.hidden);if(typeof c.checked=="string")c.checked=this._s2b(c.checked);if(typeof c.userdata!="undefined")for(p in c.userdata)this.getForm().setUserData(b,p,c.userdata[p]);
if(c.validate)g._validate=typeof(c.validate!="undefined")&&(typeof c.validate=="function"||typeof window[c.validate]=="function")?[c.validate]:String(c.validate).split(this.separator);if(typeof c.required!="undefined"){if(typeof c.required=="string")c.required=this._s2b(c.required);g._required=c.required==!0}if(g._required){if(!g._validate)g._validate=[];for(var r=!1,q=0;q<g._validate.length;q++)r=r||g._validate[q]=="NotEmpty";r||g._validate.push("NotEmpty")}g._ll=c.position==this.apos_css["label-left"]||
c.position==this.apos_css["label-top"];this.objPull[this.idPrefix+b]=this.items[a].render(g,c);this.itemPull[this.idPrefix+b]=g}};this._initObj=function(a){this._prepare();for(var b=0;b<a.length;b++)if(typeof a[b]!="undefined"&&a[b].type=="settings")for(var c in a[b])this.idef[c]=a[b][c];for(b=0;b<a.length;b++)this._prepareItem(a[b]);this._autoCheck()};this._prepareItem=function(a,b){var c=a!=null&&a.type!=null?a.type:"";if(this.items[c]){if(!a.name)a.name=this._genStr(12);var d=a.name;if(this.objPull[this.idPrefix+
d]!=null||c=="radio")d=this._genStr(12);var e=a;e.label=e.label||"";e.value=e.value;e.checked=this._s2b(e.checked);e.disabled=this._s2b(e.disabled);e.name=e.name||this._genStr(12);e.options=e.options||[];e.rows=e.rows||"none";e.uid=this._genStr(12);this._addItem(c,d,e,null,null,b);b=null;this._parentEnabled===!1&&this._disableItem(d);for(var i=0;i<e.options.length;i++)if(e.options[i].list!=null){if(!e.options[i].value)e.options[i].value=this._genStr();var g=this._addItem("list",d,e.options[i].list,
e.options[i].value,null);g._subSelect=!0;g._subSelectId=e.options[i].value}if(a.list!=null){if(!a.listParent)a.listParent=e.name;g=this._addItem("list",d,a.list,null,a.listParent)}}};this._s2b=function(a){return a=="true"||a=="1"||a=="yes"||a==!0?!0:!1};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(a,b){for(var c=b?[]:{},d=0;d<a.childNodes.length;d++)if(typeof a.childNodes[d].tagName!="undefined"){var e=a.childNodes[d].tagName;if(this._xmlSubItems[e]!=
null){var i=this._xmlSubItems[e];typeof c[i]=="undefined"&&(c[i]=[]);for(var g={},l=0;l<a.childNodes[d].attributes.length;l++){var q=a.childNodes[d].attributes[l].name,p=a.childNodes[d].attributes[l].value;g[q]=p}if(i=="note")g.text=a.childNodes[d].firstChild.nodeValue;if(i=="_userdata")g.value=a.childNodes[d].firstChild.nodeValue;var n=this._xmlToObject(a.childNodes[d]),m;for(m in n)if(m=="_userdata"){if(!g.userdata)g.userdata={};for(l=0;l<n[m].length;l++)g.userdata[n[m][l].name]=n[m][l].value}else g[m]=
n[m];b?c.push(g):c[i].push(g)}}return c};this._xmlParser=function(){if(d._loadType=="json")eval("var formJSONData="+this.xmlDoc.responseText),typeof formJSONData=="object"&&formJSONData!=null&&d._initObj(formJSONData);else{var a=d._xmlToObject(this.getXMLTopNode("items"),!0);d._initObj(a)}d.cont&&d.cont.cmp&&d.cont.cmp=="form"&&d.setSizes();d.callEvent("onXLE",[]);typeof d._doOnLoad=="function"&&d._doOnLoad()};this._doOnLoad=null;this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.loadStruct=
function(a,b,c){this._loadType="xml";if(typeof b=="string"){if(b.toLowerCase()=="json"&&(this._loadType="json",typeof a!="string")){this._initObj(a);return}this._doOnLoad=c||null}else this._doOnLoad=b||null;this.callEvent("onXLS",[]);this._xmlLoader.loadXML(a)};this.loadStructString=function(a,b){this._doOnLoad=b||null;this._xmlLoader.loadXMLString(a)};this._autoCheck=function(a){this._locked===!0?a=!1:typeof a=="undefined"&&(a=!0);for(var b in this.itemPull){var c=a&&this.itemPull[b]._udis!==!0;
this[c?"_enableItem":"_disableItem"](this.itemPull[b]._idd);if(this.getForm()._idIndex[this.itemPull[b]._idd]!=null)this.getForm()._idIndex[this.itemPull[b]._idd].enabled=c;var d=c&&(typeof this.itemPull[b]._checked=="boolean"?this.itemPull[b]._checked:!0);if(this.itemPull[b]._list)for(var e=0;e<this.itemPull[b]._list.length;e++){var i=!0;if(this.itemPull[b]._list[e]._subSelect==!0){var i=!1,g=this.getItemValue(this.itemPull[b]._idd);typeof g=="object"&&typeof g.length=="number"||(g=[g]);for(var l=
0;l<g.length;l++)i=g[l]==this.itemPull[b]._list[e]._subSelectId||i;this.itemPull[b]._listObj[e][i?"show":"hide"](this.itemPull[b]._listBase[e])}this.itemPull[b]._list[e]._autoCheck(d&&i)}}};this.doWithItem=function(a,b,c,d,e,i){if(typeof a=="object"){var g=a[0],l=a[1],q=null,p=null,n;for(n in this.itemPull){if((this.itemPull[n]._value==l||l===null)&&this.itemPull[n]._group==g)return this.objPull[n][b](this.itemPull[n],c,d,e,i);if(this.itemPull[n]._list!=null&&!p)for(var m=0;m<this.itemPull[n]._list.length;m++)p=
this.itemPull[n]._list[m].doWithItem(a,b,c,d,e)}if(p!=null)return p;else if(b=="getType")return this.doWithItem(a[0],"getType")}else if(this.itemPull[this.idPrefix+a])return this.objPull[this.idPrefix+a][b](this.itemPull[this.idPrefix+a],c,d,e,i);else{p=null;for(n in this.itemPull)if(this.itemPull[n]._list&&!p)for(m=0;m<this.itemPull[n]._list.length;m++)p==null&&(p=this.itemPull[n]._list[m].doWithItem(a,b,c,d,e,i));return p}};this._removeItem=function(a,b){b!=null?a=this.doWithItem([a,b],"destruct"):
this.doWithItem(a,"destruct");this._clearItemData(a)};this._clearItemData=function(a){if(this.itemPull[this.idPrefix+a]){a=this.idPrefix+a;try{this.objPull[a]=null,this.itemPull[a]=null,delete this.objPull[a],delete this.itemPull[a]}catch(b){}}else for(var c in this.itemPull)if(this.itemPull[c]._list)for(var d=0;d<this.itemPull[c]._list.length;d++)this.itemPull[c]._list[d]._clearItemData(a)};this.isItem=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isExist")};this.getItemType=function(a,
b){a=[a,b||null];return this.doWithItem(a,"getType")};this.getItemsList=function(){var a=[],b=[],c;for(c in this.itemPull){var d=null,d=this.itemPull[c]._group?this.itemPull[c]._group:c.replace(this.idPrefix,"");b[d]!=!0&&a.push(d);b[d]=!0}return a};this.forEachItem=function(a){for(var b in this.objPull)if(this.objPull[b].t=="radio"?a(this.itemPull[b]._group,this.itemPull[b]._value):a(String(b).replace(this.idPrefix,"")),this.itemPull[b]._list)for(var c=0;c<this.itemPull[b]._list.length;c++)this.itemPull[b]._list[c].forEachItem(a)};
this.setItemLabel=function(a,b,c){c!=null?a=[a,b]:c=b;this.doWithItem(a,"setText",c)};this.getItemLabel=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"getText")};this.setItemText=this.setItemLabel;this.getItemText=this.getItemLabel;this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"check");
this._autoCheck()};this.uncheckItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"unCheck");this._autoCheck()};this.isItemChecked=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(a,b){for(var c in this.itemPull){if(this.itemPull[c]._group==a&&(b==null||this.itemPull[c]._value==b))return this.itemPull[c]._idd;if(this.itemPull[c]._list!=null)for(var d=0;d<this.itemPull[c]._list.length;d++){var e=
this.itemPull[c]._list[d]._getRGroup(a,b);if(e!=null)return e}}return null};this.setItemValue=function(a,b){return this.getItemType(a)=="radio"?(this._getRGroup(a,b)!=null?this.checkItem(a,b):this.uncheckItem(a,this.getCheckedValue(a)),null):this.doWithItem(a,"setValue",b)};this.getItemValue=function(a,b){return this.getItemType(a)=="radio"?this.getCheckedValue(a):this.doWithItem(a,"getValue",b)};this.updateValues=function(){this._updateValues()};this.showItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,
"show")};this.hideItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"hide")};this.isItemHidden=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(a,b){this.doWithItem(a,"setWidth",b)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(a,b){this.doWithItem(a,"setHeight",b)};this.setItemFocus=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,
"setFocus")};this._updateValues=function(){for(var a in this.itemPull)if(this.objPull[a]&&typeof this.objPull[a].updateValue=="function"&&this.objPull[a].updateValue(this.itemPull[a]),this.itemPull[a]._list)for(var b=0;b<this.itemPull[a]._list.length;b++)this.itemPull[a]._list[b]._updateValues()};this._getItemByName=function(a){for(var b in this.itemPull){if(this.itemPull[b]._idd==a)return this.itemPull[b];if(this.itemPull[b]._list!=null)for(var c=0;c<this.itemPull[b]._list.length;c++){var d=this.itemPull[b]._list[c]._getItemByName(a);
if(d!=null)return d}}return null};this._resetValidateCss=function(a){a.className=a.className.replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,b,c){var d=this[this.getItemType(a)=="radio"?"_getRGroup":"_getItemByName"](a);if(d)d._vcss!=null&&this._resetValidateCss(d),d._vcss=typeof c=="string"?c:"validate_"+(b===!0?"ok":"error"),d.className+=" "+d._vcss};this.resetValidateCss=function(){for(var a in this.itemPull)if(this.itemPull[a]._vcss!=null&&this._resetValidateCss(this.itemPull[a]),
this.itemPull[a]._list!=null)for(var b=0;b<this.itemPull[a]._list.length;b++)this.itemPull[a]._list[b].resetValidateCss()};this.validate=function(){if(this.callEvent("onBeforeValidate",[])!=!1){var a=!0;this.forEachItem(function(b,c){typeof c!="undefined"&&(b=[b,c]);a=d.doWithItem(b,"_validate")&&a});this.callEvent("onAfterValidate",[a]);return a}};this.validateItem=function(a,b){typeof b!="undefined"&&(a=[a,b]);return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=
a==!0};this.setReadonly=function(a,b){this.doWithItem(a,"setReadonly",b)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(a){for(var b=0;b<this._indexId.length;b++){var c=!0;if(a==!0){var d=this.getItemType(this._indexId[b]);dhtmlXForm.prototype.items[d].setFocus||(c=!1)}if(c&&this._idIndex[this._indexId[b]].enabled)return this._indexId[b]}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(!0);a!=null&&this.setItemFocus(a)};
this.enableItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"userEnable");this._autoCheck()};this.disableItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"userDisable");this._autoCheck()};this.isItemEnabled=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isUserEnabled")};this.clear=function(){var a={};this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");for(var b in this.itemPull){var c=this.itemPull[b]._idd;this.itemPull[b]._type=="ch"&&this.uncheckItem(c);
this.itemPull[b]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(c,"");if(this.itemPull[b]._type=="combo"){this.itemPull[b]._apiChange=!0;var d=this.getCombo(c);d.selectOption(0);d=null;this.itemPull[b]._apiChange=!1}if(this.itemPull[b]._type=="se"){var e=this.getOptions(c);if(e.length>0)e[0].selected=!0}if(this.itemPull[b]._type=="ra"){var i=this.itemPull[b]._group;a[i]||(this.checkItem(i,this.doWithItem(c,"_getFirstValue")),a[i]=!0)}if(this.itemPull[b]._list)for(var g=0;g<this.itemPull[b]._list.length;g++)this.itemPull[b]._list[g].clear();
if(this["setFormData_"+this.itemPull[b]._type])this["setFormData_"+this.itemPull[b]._type](c,"")}a=null;this._parentForm&&this._autoCheck();this.resetValidateCss()};this.unload=function(){for(var a in this.objPull)this._removeItem(String(a).replace(this.idPrefix,""));this.detachAllEvents();this._ccTm&&window.clearTimeout(this._ccTm);this._formLS=null;this._xmlLoader.destructor();this._subSelectId=this._subSelect=this.idPrefix=this.skin=this.idef=this.b_index=this.align_css=this.apos_css=this.isReadonly=
this.setReadonly=this.isLocked=this.unlock=this.lock=this.getItemsList=this.getFormData=this.setFormData=this.getEditor=this.getCombo=this.getColorPicker=this.getCalendar=this.setSizes=this.setRTL=this.getUserData=this.setUserData=this.getItemWidth=this.getCheckedValue=this.detachAllEvents=this._prepare=this._locked=this._mergeSettings=this._doLock=this._parentForm=this._parentEnabled=this._type=this._rGroup=this.setSkin=this.setItemWidth=this.setItemHeight=this.setFontSize=this.remove=this.loadStructString=
this.loadStruct=this._ulToObject=this._ic=this.getOptions=this.isItemChecked=this.uncheckItem=this.checkItem=this.isItemHidden=this.hideItem=this.showItem=this.getItemValue=this.setItemValue=this.getItemText=this.setItemText=this.getItemLabel=this.setItemLabel=this._getPosition=this._setPosition=this.getItemPosition=this.setItemPosition=this.eventCatcher=this.detachEvent=this.checkEvent=this.callEvent=this.attachEvent=this.removeItem=this.addItem=this.getForm=this.unload=this.getItemType=this.doWithItem=
this.clear=this.isItem=this.forEachItem=this._isItemEnabled=this._disableItem=this._enableItem=this._clearItemData=this._autoCheck=this._initObj=this._genStr=this._removeItem=this._addItem=this.itemPull=this.objPull=this.items=this.loadXMLString=this.loadXML=this._xmlToObject=this._xmlParser=this._xmlLoader=null;for(var b=0;b<this.base.length;b++){for(;this.base[b].childNodes.length>0;)this.base[b].removeChild(this.base[b].childNodes[0]);this.base[b].parentNode&&this.base[b].parentNode.removeChild(this.base[b]);
this.base[b]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null};for(var e in this.items){this.items[e].t=e;if(typeof this.items[e]._index=="undefined")this.items[e]._index=!0;if(!this.items[e].show)this.items[e].show=function(a){a.style.display="";if(a._listObj)for(var b=0;b<a._listObj.length;b++)a._listObj[b].show(a._listBase[b])};if(!this.items[e].hide)this.items[e].hide=function(a){a.style.display="none";if(a._listObj)for(var b=0;b<a._listObj.length;b++)a._listObj[b].hide(a._listBase[b])};
if(!this.items[e].isHidden)this.items[e].isHidden=function(a){return a.style.display=="none"};if(!this.items[e].userEnable)this.items[e].userEnable=function(a){a._udis=!1};if(!this.items[e].userDisable)this.items[e].userDisable=function(a){a._udis=!0};if(!this.items[e].isUserEnabled)this.items[e].isUserEnabled=function(a){return a._udis!==!0};if(!this.items[e].getType)this.items[e].getType=function(){return this.t};if(!this.items[e].isExist)this.items[e].isExist=function(){return!0};if(!this.items[e]._validate)this.items[e]._validate=
function(a){if(!a._validate||!a._enabled)return!0;for(var b=a._type=="ch"?this.isChecked(a)?this.getValue(a):0:this.getValue(a),c=!0,d=0;d<a._validate.length;d++){var e="is"+a._validate[d];if(!((b==null||b.length==0)&&e!="isNotEmpty")){var i=dhtmlxValidation[e];typeof i!="function"&&typeof a._validate[d]=="function"&&(i=a._validate[d]);typeof i!="function"&&typeof window[a._validate[d]]=="function"&&(i=window[a._validate[d]]);c=(typeof i=="function"?i(b):RegExp(a._validate[d]).test(b))&&c;i=null}}a.callEvent("onValidate"+
(c?"Success":"Error"),[a._idd,b,c])!==!1&&a.getForm().setValidateCss(a._idd,c);return c}}this._locked=!1;this._doLock=function(a){var b=a===!0?!0:!1;if(this._locked!=b)this._locked=b,this._autoCheck(!this._locked)};this.lock=function(){this._doLock(!0)};this.unlock=function(){this._doLock(!1)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(a,b,c,d){return this.doWithItem(a,"setNumberFormat",b,c,d)};dhtmlxEventable(this);this.attachEvent("_onButtonClick",function(a,b){this.callEvent("onButtonClick",
[a,b])});this._updateBlocks=function(){this.forEachItem(function(a){(d.getItemType(a)=="block"||d.getItemType(a)=="combo")&&d.doWithItem(a,"_setCss",d.skin,d.cont.style.fontSize)})};this._isObj=function(a){return a!=null&&typeof a=="object"&&typeof a.length=="undefined"};this._copyObj=function(a){if(this._isObj(a)){var b={},c;for(c in a)b[c]=typeof a[c]=="object"&&a[c]!=null?this._copyObj(a[c]):a[c]}else{b=[];for(c=0;c<a.length;c++)b[c]=typeof a[c]=="object"&&a[c]!=null?this._copyObj(a[c]):a[c]}return b};
b!=null&&typeof b=="object"&&this._initObj(this._copyObj(b));this._parentForm&&this._updateBlocks();this._ccActive=!1;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};
dhtmlXForm.prototype.items.checkbox={render:function(a,b){a._type="ch";a._enabled=!0;a._checked=!1;a._value=typeof b.value=="undefined"?null:String(b.value);a._ro=b.readonly==!0;if(b._autoInputWidth!==!1)b.inputWidth=14;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var c=document.createElement("DIV");c.className="dhxform_img chbx0";a.appendChild(c);if(!isNaN(b.inputLeft))a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+
"px";if(!isNaN(b.inputTop))a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px";a.childNodes[a._ll?1:0].appendChild(c);a.childNodes[a._ll?1:0].firstChild.value=String(b.value);a._updateImgNode=function(a,b){var c=a.childNodes[a._ll?1:0].lastChild;c.className=b?c.className.replace(/dhxform_img/gi,"dhxform_actv_c"):c.className.replace(/dhxform_actv_c/gi,"dhxform_img");a=c=null};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",
[a._idd])};a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._idd])};b.checked==!0&&this.check(a);b.hidden==!0&&this.hide(a);b.disabled==!0&&this.userDisable(a);this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(a,b){var c=document.createElement("DIV");c.className="dhxform_label "+b.labelAlign;if(b.wrap==!0)c.style.whiteSpace="normal";
a._ll?a.insertBefore(c,a.firstChild):a.appendChild(c);if(typeof b.tooltip!="undefined")c.title=b.tooltip;c.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+
(_dhxForm_isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+b.label+(b.info?"<span class='dhxform_info'>[?]</span>":"")+(a._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(b.labelWidth))c.firstChild.style.width=parseInt(b.labelWidth)+"px";if(!isNaN(b.labelHeight))c.firstChild.style.height=parseInt(b.labelHeight)+"px";if(!isNaN(b.labelLeft))c.style.left=parseInt(b.labelLeft)+"px";if(!isNaN(b.labelTop))c.style.top=
parseInt(b.labelTop)+"px"},doAddInput:function(a,b,c,d,e,h,f){var j=document.createElement("DIV");j.className="dhxform_control";a._ll?a.appendChild(j):a.insertBefore(j,a.firstChild);var k=document.createElement(c);k.className=f;k.name=a._idd;k._idd=a._idd;k.id=b.uid;if(typeof d=="string")k.type=d;if(c=="INPUT"||c=="TEXTAREA")k.onkeyup=function(b){b=b||event;a.callEvent("onKeyUp",[this,b,this._idd])},k.onkeydown=function(b){b=b||event;a.callEvent("onKeyDown",[this,b,this._idd])};j.appendChild(k);b.readonly&&
this.setReadonly(a,!0);b.hidden==!0&&this.hide(a);b.disabled==!0&&this.userDisable(a);if(e){if(!isNaN(b.inputLeft))j.style.left=parseInt(b.inputLeft)+"px";if(!isNaN(b.inputTop))j.style.top=parseInt(b.inputTop)+"px"}var o="",i=!1;h&&(isNaN(b.inputWidth)||(o+="width:"+parseInt(b.inputWidth)+"px;",i=!0),isNaN(b.inputHeight)||(o+="height:"+parseInt(b.inputHeight)+"px;"));typeof b.style=="string"&&(o+=b.style);k.style.cssText=o;b.maxLength&&k.setAttribute("maxLength",b.maxLength);b.connector&&k.setAttribute("connector",
b.connector);if(i){var g=parseInt(k.style.width),l=_isFF||_isChrome||_isIE?k.clientWidth:k.offsetWidth;if(l>g)k.style.width=g+(g-l)+"px"}if(typeof b.note=="object"){var q=document.createElement("DIV");q.className="dhxform_note";q.style.width=(isNaN(b.note.width)?k.offsetWidth:parseInt(b.note.width))+"px";q._w=b.note.width;q.innerHTML=b.note.text;j.appendChild(q);q=null}},doUnloadNestedLists:function(a){if(a._list){for(var b=0;b<a._list.length;b++)a._list[b].unload(),a._list[b]=null,a._listObj[b]=
null,a._listBase[b].parentNode.removeChild(a._listBase[b]),a._listBase[b]=null;a._list=null;a._listObj=null;a._listBase=null}},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?
0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;for(a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a);
a=null},doAttachEvents:function(a){var b=this;a.childNodes[a._ll?1:0][_dhxForm_isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;a.preventDefault&&a.preventDefault();var d=a.target||a.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||typeof d.className!="undefined"&&d.className=="dhxform_note")return a.cancelBubble=!0,a.returnValue=!1;b.doClick(this.parentNode)};a.childNodes[a._ll?0:1].childNodes[0][_dhxForm_isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;a.preventDefault&&
a.preventDefault();if(!this.parentNode.parentNode._enabled)return a.cancelBubble=!0,a.returnValue=!1;var d=a.target||a.srcElement;if(typeof d.className!="undefined"&&d.className=="dhxform_info")return this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd]),a.cancelBubble=!0,a.returnValue=!1;b.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();a._enabled&&!a._ro&&!(a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",
[a._idd,a._value,a._checked])!==!0)&&(this.setChecked(a,!a._checked),a._autoCheck(),a.callEvent("onChange",[a._idd,a._value,a._checked]))},doCheckValue:function(a){a._checked&&a._enabled?a.childNodes[a._ll?1:0].firstChild.setAttribute("name",String(a._idd)):a.childNodes[a._ll?1:0].firstChild.removeAttribute("name")},setChecked:function(a,b){a._checked=b===!0?!0:!1;a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":
" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,!0)},unCheck:function(a){this.setChecked(a,!1)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search("disabled")>=0)a.className=String(a.className).replace(/disabled/gi,"");a._enabled=!0;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=
" disabled");a._enabled=!1;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,b){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,b){this.setChecked(a,b===!0||parseInt(b)==1||b=="true"||
a._value===b)},getValue:function(a,b){return b=="realvalue"?a._value:typeof a._value=="undefined"||a._value==null?a._checked?1:0:a._value},setReadonly:function(a,b){a._ro=b===!0},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};
dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(a,b,c){a._type="ra";a._enabled=!0;a._checked=!1;a._group=b.name;a._value=b.value;a._uid=c;a._ro=b.readonly==!0;a._rName=a._rId+a._group;this.r[a._idd]=a;b.inputWidth=14;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",!0,!0,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var d=document.createElement("DIV");d.className="dhxform_img rdbt0";a.appendChild(d);if(!isNaN(b.inputLeft))a.childNodes[a._ll?
1:0].style.left=parseInt(b.inputLeft)+"px";if(!isNaN(b.inputTop))a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px";a.childNodes[a._ll?1:0].appendChild(d);a.childNodes[a._ll?1:0].firstChild.value=String(b.value);a._updateImgNode=function(a,b){var c=a.childNodes[a._ll?1:0].lastChild;c.className=b?c.className.replace(/dhxform_img/gi,"dhxform_actv_r"):c.className.replace(/dhxform_actv_r/gi,"dhxform_img");a=c=null};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._group,a._value])};
a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._group,a._value])};a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._group,this._value])};if(this.input[a._rName]==null){var e=document.createElement("INPUT");e.type="HIDDEN";e.name=b.name;e.firstValue=a._value;a.appendChild(e);this.input[a._rName]=e}if(!this.firstValue[a._rName])this.firstValue[a._rName]=b.value;b.checked==!0&&this.check(a);b.hidden==!0&&this.hide(a);b.disabled==!0&&this.userDisable(a);
this.doAttachEvents(a);return this},destruct:function(a){if(a.lastChild==this.input[a._rName]){var b=!1,c;for(c in this.r)!b&&this.r[c]._group==a._group&&this.r[c]._idd!=a._idd&&(this.r[c].appendChild(this.input[a._rName]),b=!0);b||(this.input[a._rName].parentNode.removeChild(this.input[a._rName]),this.input[a._rName]=null,this.firstValue[a._rName]=null)}var d=a._idd;a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a);return d},doClick:function(a){a.childNodes[a._ll?
0:1].childNodes[0].focus();if(a._enabled&&!a._checked&&!a._ro){var b=[a._group,a._value,!0];a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",b)!==!0||(this.setChecked(a,!0),a.getForm()._autoCheck(),a.callEvent("onChange",b))}},doCheckValue:function(a){var b=null,c;for(c in this.r)if(this.r[c]._checked&&this.r[c]._enabled&&this.r[c]._group==a._group&&this.r[c]._rId==a._rId)b=this.r[c]._value;b!=null?(this.input[a._rName].setAttribute("name",String(a._group)),this.input[a._rName].setAttribute("value",
b),this.input[a._rName]._value=b):(this.input[a._rName].removeAttribute("name"),this.input[a._rName].removeAttribute("value"),this.input[a._rName]._value=null)},setChecked:function(a,b){var b=b===!0,c;for(c in this.r)if(this.r[c]._group==a._group&&this.r[c]._rId==a._rId){var d=!1;if(this.r[c]._idd==a._idd){if(this.r[c]._checked!=b)this.r[c]._checked=b,d=!0}else if(this.r[c]._checked)this.r[c]._checked=!1,d=!0;if(d){var e=this.r[c].childNodes[this.r[c]._ll?1:0].childNodes[1];e.className=e.className.replace(/rdbt[0-1]{1}/gi,
"")+(this.r[c]._checked?" rdbt1":" rdbt0");e=null}}this.doCheckValue(a)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(){}};
(function(){for(var a in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.select={render:function(a,b){a._type="se";a._enabled=!0;a._value=null;a._newValue=null;if((_isFF||_isIE)&&typeof b.inputWidth=="number")b.inputWidth+=a._inpWidthFix||2;this.doAddLabel(a,b);this.doAddInput(a,b,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,b);b.connector?this.doLoadOptsConnector(a,b.connector):b.value!="undefined"&&this.setValue(a,b.value);return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=
null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;for(a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);a.childNodes.length>
0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a);a=null},doAddLabel:function(a,b){var c=document.createElement("DIV");c.className="dhxform_label "+b.labelAlign;c.innerHTML="<label for='"+b.uid+"'>"+b.label+(b.info?"<span class='dhxform_info'>[?]</span>":"")+(a._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(b.wrap==!0)c.style.whiteSpace="normal";if(typeof b.tooltip!="undefined")c.title=b.tooltip;a.appendChild(c);if(typeof b.label=="undefined"||b.label==null||
b.label.length==0)c.style.display="none";if(!isNaN(b.labelWidth))c.style.width=parseInt(b.labelWidth)+"px";if(!isNaN(b.labelHeight))c.style.height=parseInt(b.labelHeight)+"px";if(!isNaN(b.labelLeft))c.style.left=parseInt(b.labelLeft)+"px";if(!isNaN(b.labelTop))c.style.top=parseInt(b.labelTop)+"px";if(b.info)c.onclick=function(a){var a=a||event,b=a.target||a.srcElement;if(typeof b.className!="undefined"&&b.className=="dhxform_info")return this.parentNode.callEvent("onInfo",[this.parentNode._idd]),
a.cancelBubble=!0,a.returnValue=!1}},doAttachEvents:function(a){var b=a.childNodes[a._ll?1:0].childNodes[0],c=this;b.onclick=function(){c.doOnChange(this);c.doValidate(this.parentNode.parentNode)};b.onkeydown=function(a){a=a||event;c.doOnChange(this);c.doValidate(this.parentNode.parentNode);this.parentNode.parentNode.callEvent("onKeyDown",[this,a,this.parentNode.parentNode._idd])};b.onchange=function(){c.doOnChange(this);c.doValidate(this.parentNode.parentNode)};b.onkeyup=function(a){a=a||event;this.parentNode.parentNode.callEvent("onKeyUp",
[this,a,this.parentNode.parentNode._idd])};b=null;this.doAttachChangeLS(a)},doAttachChangeLS:function(a){var b=a.childNodes[a._ll?1:0].childNodes[0];b.onfocus=function(){var a=this.parentNode.parentNode;a.getForm()._ccActivate(a._idd,this,a.getForm().getItemValue(a._idd,!0));a.getForm().callEvent("onFocus",[a._idd]);a=null};b.onblur=function(){var a=this.parentNode.parentNode;a.getForm()._ccDeactivate(a._idd);a.getForm().callEvent("onBlur",[a._idd]);a=null};b=null},doValidate:function(a){a.getForm().live_validate&&
this._validate(a)},doLoadOpts:function(a,b,c){for(var d=a.childNodes[a._ll?1:0].childNodes[0],e=b.options,h=!1,f=0;f<e.length;f++){var j=e[f].text||e[f].label;if(!j||typeof j=="undefined")j="";var k=new Option(j,e[f].value);typeof e[f].img_src=="string"&&k.setAttribute("img_src",e[f].img_src);d.options.add(k);if(e[f].selected==!0||e[f].selected=="true")k.selected=!0,a._value=e[f].value,h=!0}if(!h&&d.selectedIndex>=0)a._value=d.options[d.selectedIndex].value;c===!0&&a.callEvent("onOptionsLoaded",[a._idd]);
this._checkNoteWidth(a)},doLoadOptsConnector:function(a,b){var c=this;a._connector_working=!0;dhtmlxAjax.get(b,function(b){for(var e=b.doXPath("//item"),h=[],f=0;f<e.length;f++)h[f]={label:e[f].getAttribute("label"),value:e[f].getAttribute("value"),selected:e[f].getAttribute("selected")!=null};c.doLoadOpts(a,{options:h},!0);a._connector_working=!1;if(a._connector_value!=null)c.setValue(a,a._connector_value),a._connector_value=null;thet=a=null})},doOnChange:function(a){var b=a.parentNode.parentNode;
b._newValue=a.selectedIndex>=0?a.options[a.selectedIndex].value:null;if(b._newValue!=b._value){if(b.checkEvent("onBeforeChange")&&b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==!0){for(var c=0;c<a.options.length;c++)if(a.options[c].value==b._value)a.options[c].selected=!0;return}b._value=b._newValue;b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setText:function(a,b){b||(b="");a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b;a.childNodes[a._ll?0:1].style.display=b.length==
0||b==null?"none":""},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){if(String(a.className).search("disabled")>=0)a.className=String(a.className).replace(/disabled/gi,"");a._enabled=!0;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled");a._enabled=!1;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",
!0)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(a,b){if(a._connector_working)a._connector_value=b;else{for(var c=this.getOptions(a),d=0;d<c.length;d++)if(c[d].value==b)c[d].selected=!0,a._value=c[d].value;a._list!=null&&a._list.length>0&&a.getForm()._autoCheck();a.getForm()._ccReload(a._idd,a._value)}},getValue:function(a){for(var b=-1,c=this.getOptions(a),d=0;d<c.length;d++)if(c[d].selected)b=c[d].value;return b},setWidth:function(a,b){a.childNodes[a._ll?
1:0].childNodes[0].style.width=b+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(a){var b;if(a.childNodes[a._ll?1:0].childNodes[1]!=null)if(b=a.childNodes[a._ll?1:0].childNodes[1],b.className!=null&&b.className.search(/dhxform_note/gi)>=0&&b._w=="auto")b.style.width=a.childNodes[a._ll?1:0].childNodes[0].offsetWidth+"px";b=null}};
(function(){for(var a in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(a,b,c){var d=a.childNodes[a._ll?1:0].childNodes[0];d.multiple=!0;if(!isNaN(b.size))d.size=Number(b.size);a._value=[];a._newValue=[];for(var e=b.options,h=0;h<e.length;h++){var f=new Option(e[h].text||e[h].label,e[h].value);d.options.add(f);if(e[h].selected==!0||e[h].selected=="true")f.selected=!0,a._value.push(e[h].value)}c===!0&&a.callEvent("onOptionsLoaded",[a._idd]);this._checkNoteWidth(a)},doAttachEvents:function(a){var b=a.childNodes[a._ll?
1:0].childNodes[0],c=this;b.onfocus=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onFocus",[a._idd]);a=null};b.onblur=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a.getForm().callEvent("onBlur",[a._idd]);a=null};b.onclick=function(){c.doOnChange(this);var a=this.parentNode.parentNode;a._autoCheck();a=null}},doOnChange:function(a){var b=a.parentNode.parentNode;b._newValue=[];for(var c=0;c<a.options.length;c++)a.options[c].selected&&b._newValue.push(a.options[c].value);
if(b._value.sort().toString()!=b._newValue.sort().toString()){if(b.checkEvent("onBeforeChange")&&b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==!0){for(var d={},c=0;c<b._value.length;c++)d[b._value[c]]=!0;for(c=0;c<a.options.length;c++)a.options[c].selected=d[a.options[c].value]==!0;d=null;return}b._value=[];for(c=0;c<b._newValue.length;c++)b._value.push(b._newValue[c]);b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setValue:function(a,b){var c={};typeof b=="string"&&(b=
b.split(","));typeof b!="object"&&(b=[b]);for(var d=0;d<b.length;d++)c[b[d]]=!0;for(var e=this.getOptions(a),d=0;d<e.length;d++)e[d].selected=c[e[d].value]==!0;a._autoCheck()},getValue:function(a){for(var b=[],c=this.getOptions(a),d=0;d<c.length;d++)c[d].selected&&b.push(c[d].value);return b}};(function(){for(var a in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[a]||(dhtmlXForm.prototype.items.multiselect[a]=dhtmlXForm.prototype.items.select[a])})();
dhtmlXForm.prototype.items.input={render:function(a,b){var c=!isNaN(b.rows);a._type="ta";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,c?"TEXTAREA":"INPUT",c?null:"TEXT",!0,!0,"dhxform_textarea");this.doAttachEvents(a);if(c)a.childNodes[a._ll?1:0].childNodes[0].rows=b.rows;if(typeof b.numberFormat!="undefined"){var d,e=null,h=null;if(typeof b.numberFormat!="string")d=b.numberFormat[0],e=b.numberFormat[1]||null,h=b.numberFormat[2]||null;else{d=b.numberFormat;if(typeof b.groupSep=="string")e=
b.groupSep;if(typeof b.decSep=="string")h=b.decSep}this.setNumberFormat(a,d,e,h,!1)}this.setValue(a,b.value);return this},doAttachEvents:function(a){var b=this;if(a._type=="ta"||a._type=="se"||a._type=="pw")a.childNodes[a._ll?1:0].childNodes[0].onfocus=function(){var a=this.parentNode.parentNode;if(a._df!=null)this.value=a._value||"";a.getForm()._ccActivate(a._idd,this,this.value);a.getForm().callEvent("onFocus",[a._idd]);a=null};a.childNodes[a._ll?1:0].childNodes[0].onblur=function(){var a=this.parentNode.parentNode;
a.getForm()._ccDeactivate(a._idd);b.updateValue(a,!0);a.getForm().live_validate&&b._validate(a);a.getForm().callEvent("onBlur",[a._idd]);a=null}},updateValue:function(a,b){var c=a.childNodes[a._ll?1:0].childNodes[0].value;if(b||!(a._df!=null&&c==this._getFmtValue(a,c))){var d=this;a._value!=c?a.checkEvent("onBeforeChange")&&a.callEvent("onBeforeChange",[a._idd,a._value,c])!==!0?a._df!=null?d.setValue(a,a._value):a.childNodes[a._ll?1:0].childNodes[0].value=a._value:(a._df!=null?d.setValue(a,c):a._value=
c,a.callEvent("onChange",[a._idd,c])):a._df!=null&&this.setValue(a,a._value)}},setValue:function(a,b){a._value=typeof b!="undefined"&&b!=null?b:"";var c=String(a._value)||"",d=a.childNodes[a._ll?1:0].childNodes[0];a._df!=null&&typeof this._getFmtValue=="function"&&(c=this._getFmtValue(a,c));if(d.value!=c)d.value=c,a.getForm()._ccReload(a._idd,c);d=null},getValue:function(a){var b=a.getForm();b._formLS&&b._formLS[a._idd]!=null&&this.updateValue(a);b=null;return typeof a._value!="undefined"&&a._value!=
null?a._value:""},setReadonly:function(a,b){a._ro=b===!0;a._ro?a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true"):a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(a){if(!a._ro)a._ro=!1;return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(a,b,c,d,e){typeof e!="boolean"&&(e=!0);if(b=="")return a._df=null,e&&this.setValue(a,a._value),!0;if(typeof b=="string"){var h=b.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);
if(h==null||h.length!=4)return!1;a._df={i_len:!1,i_sep:typeof c=="string"?c:",",d_len:!1,d_sep:typeof d=="string"?d:".",s_bef:typeof h[1]=="string"?h[1]:"",s_aft:typeof h[3]=="string"?h[3]:""};var f=h[2].split(".");if(f[1]!=null)a._df.d_len=f[1].length;var j=f[0].split(",");if(j.length>1)a._df.i_len=j[j.length-1].length;e&&this.setValue(a,a._value);return!0}},_getFmtValue:function(a,b){var c=b.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(c!=null&&c.length==5){var d="";c[1]!=null&&(d+=c[1]);d+=a._df.s_bef;
if(a._df.i_len!==!1){for(var e=0,h="",f=c[2].length-1;f>=0;f--)h=""+c[2].charAt(f)+h,++e==a._df.i_len&&f>0&&(h=a._df.i_sep+h,e=0);d+=h}else d+=c[2];if(a._df.d_len!==!1){for(c[4]==null&&(c[4]="");c[4].length<a._df.d_len;)c[4]+="0";eval("var t0 = new RegExp(/\\d{"+a._df.d_len+"}/);");var j=c[4].match(t0);j!=null&&(d+=a._df.d_sep+j);t0=j=null}d+=a._df.s_aft;return d}return b}};
(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[a]=dhtmlXForm.prototype.items.select[a]})();dhtmlXForm.prototype.items.password={render:function(a,b){a._type="pw";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","PASSWORD",!0,!0,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,b.value);return this}};
(function(){for(var a in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[a]=dhtmlXForm.prototype.items.input[a]})();
dhtmlXForm.prototype.items.file={render:function(a,b){a._type="fl";a._enabled=!0;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","FILE",!0,!1,"dhxform_textarea");a.childNodes[a._ll?1:0].childNodes[0].onchange=function(){a.callEvent("onChange",[a._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};
(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[a]=dhtmlXForm.prototype.items.input[a]})();
dhtmlXForm.prototype.items.label={_index:!1,render:function(a,b){a._type="lb";a._enabled=!0;a._checked=!0;var c=document.createElement("DIV");c.className="dhxform_txt_label2"+(b._isTopmost?" topmost":"");c.innerHTML=b.label;a.appendChild(c);b.hidden==!0&&this.hide(a);b.disabled==!0&&this.userDisable(a);if(!isNaN(b.labelWidth))c.style.width=parseInt(b.labelWidth)+"px";if(!isNaN(b.labelHeight))c.style.height=parseInt(b.labelHeight)+"px";if(!isNaN(b.labelLeft))c.style.left=parseInt(b.labelLeft)+"px";
if(!isNaN(b.labelTop))c.style.top=parseInt(b.labelTop)+"px";return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0)a.className=String(a.className).replace(/disabled/gi,"");a._enabled=!0},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled");
a._enabled=!1},setText:function(a,b){a.firstChild.innerHTML=b},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.button={render:function(a,b){a._type="bt";a._enabled=!0;a._name=b.name;a.className=String(a.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");if(!isNaN(b.width))var c=Math.max(b.width,10);var d=typeof c!="undefined";a._doOnKeyUpDown=function(a,b){this.callEvent(a,[this.childNodes[this._ll?0:1].childNodes[0],b,this._idd])};a.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr" '+(d?' style="width:'+c+'px;"':
"")+'onkeypress="var e=event||window.arguments[0];if((e.keyCode==32||e.charCode==32||e.keyCode==13||e.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);return false;}" ontouchstart="var e=event;e.preventDefault();if(!this.parentNode._busy){this.parentNode._busy=true;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);}" onfocus="this.parentNode._doOnFocus(this.parentNode);" onblur="_dhxForm_doClick(this.childNodes[0],\'mouseout\');this.parentNode._doOnBlur(this.parentNode);" onkeyup=\'var e=event||window.arguments[0];this.parentNode._doOnKeyUpDown("onKeyUp",e);\' onkeydown=\'var e=event||window.arguments[0];this.parentNode._doOnKeyUpDown("onKeyDown",e);\' ><table cellspacing="0" cellpadding="0" border="0" align="left" style="font-size:inherit; '+
(d?"width:"+c+"px;table-layout:fixed;":"")+'"><tr><td class="btn_l"><div class="btn_l">&nbsp;</div></td><td class="btn_m" '+(d?'style="width:'+(c-10)+'px;"':"")+'><div class="btn_txt'+(d?" btn_txt_fixed_size":"")+'">'+b.value+'</div></td><td class="btn_r"><div class="btn_r">&nbsp;</div></td></tr></table></div>';if(!isNaN(b.inputLeft))a.childNodes[0].style.left=parseInt(b.inputLeft)+"px";if(!isNaN(b.inputTop))a.childNodes[0].style.top=parseInt(b.inputTop)+"px";b.hidden==!0&&this.hide(a);b.disabled==
!0&&this.userDisable(a);if(typeof b.tooltip!="undefined")a.firstChild.title=b.tooltip;a.onselectstart=function(a){a=a||event;a.cancelBubble=!0;return a.returnValue=!1};a.childNodes[0].onselectstart=function(a){a=a||event;a.cancelBubble=!0;return a.returnValue=!1};a.childNodes[0].childNodes[0].onmouseover=function(){var a=this.parentNode.parentNode;if(a._enabled)this._isOver=!0,this.className="dhxform_btn_over",a=null};a.childNodes[0].childNodes[0].onmouseout=function(){var a=this.parentNode.parentNode;
if(a._enabled)this.className="",this._isOver=this._pressed=this._allowClick=!1,a=null};a.childNodes[0].childNodes[0].onmousedown=function(){if(!this._pressed){var a=this.parentNode.parentNode;if(a._enabled)this.className="dhxform_btn_pressed",this._pressed=this._allowClick=!0,a=null}};a.childNodes[0].childNodes[0].onmouseup=function(){if(this._pressed){var a=this.parentNode.parentNode;if(a._enabled)a._busy=!1,this.className=this._isOver?"dhxform_btn_over":"",this._pressed&&this._allowClick&&a.callEvent("_onButtonClick",
[a._name,a._cmd]),this._pressed=this._allowClick=!1,a=null}};a._doOnFocus=function(a){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(a){a.getForm().callEvent("onBlur",[a._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a.onselectstart=null;a.childNodes[0].onselectstart=null;a.childNodes[0].onkeypress=null;a.childNodes[0].ontouchstart=null;
a.childNodes[0].onblur=null;a.childNodes[0].childNodes[0].onmouseover=null;a.childNodes[0].childNodes[0].onmouseout=null;a.childNodes[0].childNodes[0].onmousedown=null;for(a.childNodes[0].childNodes[0].onmouseup=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0)a.className=String(a.className).replace(/disabled/gi,"");a._enabled=!0;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role",
"link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled");a._enabled=!1;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,b){a.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML},
setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.hidden={_index:!1,render:function(a,b){a.style.display="none";a._name=b.name;a._type="hd";a._enabled=!0;var c=document.createElement("INPUT");c.type="HIDDEN";c.name=b.name;c.value=b.value||"";a.appendChild(c);return this},destruct:function(a){for(this.doUnloadNestedLists(a);a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a);
a=null},enable:function(a){a._enabled=!0;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=!1;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(a,b){a.childNodes[0].value=b},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.list={_index:!1,render:function(a){a._type="list";a._enabled=!0;a._isNestedForm=!0;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a)]},destruct:function(){}};
dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(a,b){a._type="fs";parseInt(b.inputWidth);a._width=b.width;a._enabled=!0;a._checked=!0;a.className="fs_"+b.position+(typeof b.className=="string"?" "+b.className:"");var c=document.createElement("FIELDSET");c.className="dhxform_fs";var d=String(b.labelAlign).replace("align_","");c.innerHTML="<legend class='fs_legend' align='"+d+"' style='text-align:"+d+"'>"+b.label+"</legend>";a.appendChild(c);if(!isNaN(b.inputLeft))c.style.left=parseInt(b.inputLeft)+
"px";if(!isNaN(b.inputTop))c.style.top=parseInt(b.inputTop)+"px";if(b.inputWidth!="auto"&&!isNaN(b.inputWidth)){c.style.width=parseInt(b.inputWidth)+"px";var e=parseInt(c.style.width);if(c.offsetWidth>e)c.style.width=e+(e-c.offsetWidth)+"px"}a._addSubListNode=function(){var a=document.createElement("DIV");a._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(a);return a};b.hidden==!0&&this.hide(a);b.disabled==!0&&this.userDisable(a);return this},destruct:function(a){this.doUnloadNestedLists(a);
a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;for(a.getForm=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);a.parentNode.removeChild(a);a=null},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=!0;if(String(a.className).search("disabled")>=0)a.className=String(a.className).replace(/disabled/gi,
"")},disable:function(a){a._enabled=!1;String(a.className).search("disabled")<0&&(a.className+=" disabled")},setWidth:function(a,b){a.childNodes[0].style.width=b+"px";a._width=b},getWidth:function(a){return a._width}};(function(){for(var a in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[a]=dhtmlXForm.prototype.items.checkbox[a]})();
dhtmlXForm.prototype.items.block={_index:!1,render:function(a,b){a._type="bl";a._width=b.width;a._enabled=!0;a._checked=!0;a.className="block_"+b.position+(typeof b.className=="string"?" "+b.className:"");var c=document.createElement("DIV");c.className="dhxform_obj_"+a.getForm().skin+" dhxform_block";c.style.fontSize=a.getForm().cont.style.fontSize;if(b.style)c.style.cssText=b.style;if(typeof b.id!="undefined")c.id=b.id;a.appendChild(c);if(!isNaN(b.inputLeft))c.style.left=parseInt(b.inputLeft)+"px";
if(!isNaN(b.inputTop))c.style.top=parseInt(b.inputTop)+"px";if(b.inputWidth!="auto"&&!isNaN(b.inputWidth))c.style.width=parseInt(b.inputWidth)+"px";if(!isNaN(b.blockOffset))a._ofsNested=b.blockOffset;a._addSubListNode=function(){var a=document.createElement("DIV");a._inBlcok=!0;if(typeof this._ofsNested!="undefined")a._ofsNested=this._ofsNested;this.childNodes[0].appendChild(a);return a};b.hidden==!0&&this.hide(a);b.disabled==!0&&this.userDisable(a);return this},_setCss:function(a,b,c){a.firstChild.className=
"dhxform_obj_"+b+" dhxform_block";a.firstChild.style.fontSize=c}};(function(){for(var a in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[a]=dhtmlXForm.prototype.items.fieldset[a]})();dhtmlXForm.prototype.items.newcolumn={_index:!1};
dhtmlXForm.prototype.items.template={render:function(a,b){var c=!isNaN(b.rows);a._type="tp";a._enabled=!0;if(b.format){if(typeof b.format=="function")a.format=b.format;if(typeof window[b.format]=="function")a.format=window[b.format]}if(!a.format)a.format=function(a,b){return b};this.doAddLabel(a,b);this.doAddInput(a,b,"DIV",null,!0,!0,"dhxform_item_template");a._value=b.value||"";a.childNodes[1].childNodes[0].innerHTML=a.format(a._idd,a._value);return this},setValue:function(a,b){a._value=b;a.childNodes[1].childNodes[0].innerHTML=
a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search("disabled")>=0)a.className=String(a.className).replace(/disabled/gi,"");a._enabled=!0},disable:function(a){String(a.className).search("disabled")<0&&(a.className+=" disabled");a._enabled=!1}};(function(){for(var a in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[a]=dhtmlXForm.prototype.items.select[a]})();
dhtmlXForm.prototype._ulToObject=function(a,b){for(var c=[],d=0;d<a.childNodes.length;d++){if(String(a.childNodes[d].tagName||"").toLowerCase()=="li"){for(var e={},h=a.childNodes[d],f=0;f<b.length;f++)h.getAttribute(b[f])!=null&&(e[String(b[f]).replace("ftype","type")]=h.getAttribute(b[f]));if(!e.label)try{e.label=h.firstChild.nodeValue}catch(j){}var k=h.getElementsByTagName("UL");k[0]!=null&&(e[e.type=="select"?"options":"list"]=dhtmlXForm.prototype._ulToObject(k[0],b));for(f=0;f<h.childNodes.length;f++)if(String(h.childNodes[f].tagName||
"").toLowerCase()=="userdata"){if(!e.userdata)e.userdata={};e.userdata[h.childNodes[f].getAttribute("name")]=h.childNodes[f].firstChild.nodeValue}c[c.length]=e}if(String(a.childNodes[d].tagName||"").toLowerCase()=="div"){e={type:"label"};try{e.label=a.childNodes[d].firstChild.nodeValue}catch(o){}c[c.length]=e}}return c};
dhtmlxEvent(window,"load",function(){for(var a="ftype,name,value,label,check,checked,disabled,text,rows,select,selected,width,style,className,labelWidth,labelHeight,labelLeft,labelTop,inputWidth,inputHeight,inputLeft,inputTop,position,size".split(","),b=document.getElementsByTagName("UL"),c=[],d=0;d<b.length;d++)if(b[d].className=="dhtmlxForm"){var e=document.createElement("DIV");c[c.length]={nodeUL:b[d],nodeForm:e,data:dhtmlXForm.prototype._ulToObject(b[d],a),name:b[d].getAttribute("name")||null}}for(d=
0;d<c.length;d++){c[d].nodeUL.parentNode.insertBefore(c[d].nodeForm,c[d].nodeUL);var h=new dhtmlXForm(c[d].nodeForm,c[d].data);c[d].name!==null&&(window[c[d].name]=h);var f=c[d].nodeUL.getAttribute("oninit")||null;c[d].nodeUL.parentNode.removeChild(c[d].nodeUL);c[d].nodeUL=null;c[d].nodeForm=null;c[d].data=null;c[d]=null;if(f)if(typeof f=="function")f();else if(typeof window[f]=="function")window[f]()}});
if(window.dhtmlXContainer){if(!dhtmlx.attaches)dhtmlx.attaches={};dhtmlx.attaches.attachForm||(dhtmlx.attaches.attachForm=function(a){var b=document.createElement("DIV");b.id="dhxFormObj_"+this._genStr(12);b.style.position="relative";b.style.width="100%";b.style.height="100%";dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(b):b.style.overflow="auto";b.cmp="form";this.attachObject(b,!1,!0,!1);this.vs[this.av].form=new dhtmlXForm(b,a);this.vs[this.av].form.setSkin(this.skin);this.vs[this.av].form.setSizes();
this.vs[this.av].formObj=b;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects());return this.vs[this._viewRestore()].form});if(!dhtmlx.detaches)dhtmlx.detaches={};dhtmlx.detaches.detachForm||(dhtmlx.detaches.detachForm=function(a){if(a.form)a.form.unload(),a.form=null,a.formObj=null,a.attachForm=null})}
dhtmlXForm.prototype.setUserData=function(a,b,c,d){if(typeof d!="undefined"){var e=this.doWithItem([a,b],"_getId");e!=null&&(a=e,b=c,c=d)}if(!this._userdata)this._userdata={};this._userdata[a]=this._userdata[a]||{};this._userdata[a][b]=c};
dhtmlXForm.prototype.getUserData=function(a,b,c){if(typeof c!="undefined"){var d=this.doWithItem([a,b],"_getId");d!=null&&(a=d,b=c)}return this._userdata!=null&&typeof this._userdata[a]!="undefined"&&typeof this._userdata[a][b]!="undefined"?this._userdata[a][b]:""};
dhtmlXForm.prototype.setRTL=function(a){if(this._rtl=a===!0?!0:!1)String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl");else if(String(this.cont).search(/dhxform_rtl/gi)>=0)this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")};
_dhxForm_doClick=function(a,b){if(typeof b=="object")var c=b[1],b=b[0];if(document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent(b,!0,!1);a.dispatchEvent(d)}else if(document.createEventObject)d=document.createEventObject(),d.button=1,a.fireEvent("on"+b,d);c&&window.setTimeout(function(){_dhxForm_doClick(a,c)},100)};
dhtmlXForm.prototype.setFormData=function(a){for(var b in a){var c=this.getItemType(b);switch(c){case "checkbox":this[a[b]==!0||parseInt(a[b])==1||a[b]=="true"||a[b]==this.getItemValue(b,"realvalue")?"checkItem":"uncheckItem"](b);break;case "radio":this.checkItem(b,a[b]);break;case "input":case "textarea":case "password":case "select":case "multiselect":case "hidden":case "template":case "combo":case "calendar":case "colorpicker":case "editor":this.setItemValue(b,a[b]);break;default:if(this["setFormData_"+
c])this["setFormData_"+c](b,a[b]);else{if(!this.hId)this.hId=this._genStr(12);this.setUserData(this.hId,b,a[b])}}}};
dhtmlXForm.prototype.getFormData=function(a,b){var c={},d=this,e;for(e in this.itemPull){var h=this.itemPull[e]._idd,f=this.itemPull[e]._type;f=="ch"&&(c[h]=this.isItemChecked(h)?this.getItemValue(h):0);f=="ra"&&!c[this.itemPull[e]._group]&&(c[this.itemPull[e]._group]=this.getCheckedValue(this.itemPull[e]._group));f in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(c[h]=this.getItemValue(h,a));this["getFormData_"+f]&&(c[h]=this["getFormData_"+f](h));if(f=="up"){var j=this.getItemValue(h),
k;for(k in j)c[k]=j[k]}if(this.itemPull[e]._list)for(var o=0;o<this.itemPull[e]._list.length;o++){var i=this.itemPull[e]._list[o].getFormData(a,b),g;for(g in i)c[g]=i[g]}}if(!b&&this.hId&&this._userdata[this.hId])for(e in this._userdata[this.hId])c[e]||(c[e]=this._userdata[this.hId][e]);return c};
dhtmlXForm.prototype.adjustParentSize=function(){for(var a=0,b=-1,c=0;c<this.base.length;c++)if(a+=this.base[c].firstChild.offsetWidth,this.base[c].offsetHeight>b)b=this.base[c].offsetHeight;var d=!1;try{if(d=this.cont.parentNode.parentNode.parentNode.parentNode._isCell==!0)var e=this.cont.parentNode.parentNode.parentNode.parentNode}catch(h){}if(d&&typeof e!="undefined")a>0&&e.setWidth(a+10),b>0&&e.setHeight(b+e.firstChild.firstChild.offsetHeight+5),d=e=null;else{var f=!1;try{if(f=this.cont.parentNode.parentNode.parentNode.parentNode._isWindow==
!0)var j=this.cont.parentNode.parentNode.parentNode.parentNode}catch(k){}if(f&&typeof j!="undefined")this.cont.style.display="none",(a>0||b>0)&&j._adjustToContent(a+10,b+10),this.cont.style.display="",f=j=null}};window._dhxForm_isIPad=navigator.userAgent.search(/iPad/gi)>=0;
dhtmlXForm.prototype.load=function(a,b,c){var d=this;d.callEvent("onXLS",[]);typeof b=="function"&&(c=b,b="xml");dhtmlxAjax.get(a,function(e){var h={};if(b=="json")eval("data="+e.xmlDoc.responseText);else{var f=e.doXPath("//data")[0];if(f&&f.getAttribute("dhx_security"))dhtmlx.security_key=f.getAttribute("dhx_security");for(var j=e.doXPath("//data/*"),k=0;k<j.length;k++)h[j[k].tagName]=j[k].firstChild?j[k].firstChild.nodeValue:""}var o=a.match(/(\?|\&)id\=([a-z0-9_]*)/i);o&&o[0]&&(o=o[0].split("=")[1]);
if(d.callEvent("onBeforeDataLoad",[o,h]))d.formId=o,d._last_load_data=h,d.setFormData(h),d.resetDataProcessor("updated");d.callEvent("onXLE",[]);c&&c.call(this)})};dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))};
dhtmlXForm.prototype.send=function(a,b,c,d){typeof b=="function"&&(c=b,b="post");if(d===!0||this.validate()){var e=this.getFormData(!0),h=[],f;for(f in e)h.push(f+"="+encodeURIComponent(e[f]));var j=function(a){c&&c.call(this,a,a.xmlDoc.responseText)};b=="get"?dhtmlxAjax.get(a+(a.indexOf("?")==-1?"?":"&")+h.join("&"),j):dhtmlxAjax.post(a,h.join("&"),j)}};dhtmlXForm.prototype.save=function(){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(a,b){this.formId=b};
dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(a){var c=this.obj.getFormData(!0);c[this.action_param]=this.obj.getUserData(a,this.action_param);return c};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(a,c,d,e){if(c=="inserted"||c=="updated")this.obj.resetDataProcessor("updated"),this.obj._last_load_data=this.obj.getFormData(!0);this.obj.callEvent("onAfterSave",[this.obj.formId,e]);return!0});a.autoUpdate=
!1;a.setTransactionMode("POST",!0);this.dp=a;this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(this.dp)this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,a)};
dhtmlXForm.prototype._ccActivate=function(a,b,c){if(!this._formLS)this._formLS={};this._formLS[a]||(this._formLS[a]={input:b,value:c});if(!this._ccActive)this._ccActive=!0,this._ccDo();b=null};dhtmlXForm.prototype._ccDeactivate=function(a){this._ccTm&&window.clearTimeout(this._ccTm);this._ccActive=!1;if(this._formLS!=null&&this._formLS[a]!=null)this._formLS[a].input=null,this._formLS[a]=null,delete this._formLS[a]};
dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var a in this._formLS){var b=this._formLS[a].input;if(String(b.tagName).toLowerCase()=="select"){var c="";if(b.selectedIndex>=0&&b.selectedIndex<b.options.length)c=b.options[b.selectedIndex].value}else c=b.value;if(c!=this._formLS[a].value)this._formLS[a].value=c,this.callEvent("onInputChange",[b._idd,c,this]);b=null}if(this._ccActive){var d=this;this._ccTm=window.setTimeout(function(){d._ccDo();d=null},100)}};
dhtmlXForm.prototype._ccReload=function(a,b){if(this._formLS&&this._formLS[a])this._formLS[a].value=b};
if(!window.dhtmlxValidation)dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return a instanceof Array?a.length>0:!a==""},isValidBoolean:function(a){return!!a.match(/^(0|1|true|false)$/)},isValidEmail:function(a){return!!a.match(/(^[a-z]([a-z0-9_\.]*)@([a-z_\.]*)([.][a-z]{3})$)|(^[a-z]([a-z_\.]*)@([a-z_\-\.]*)(\.[a-z]{2,3})$)/i)},isValidInteger:function(a){return!!a.match(/(^-?\d+$)/)},isValidNumeric:function(a){return!!a.match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},
isValidAplhaNumeric:function(a){return!!a.match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(a){var b=a.match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31&&b[4]<=59&&b[5]<=59&&b[6]<=59)||!1},isValidDate:function(a){var b=a.match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||!1},isValidTime:function(a){var b=a.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return b&&!!(b[1]<=24&&b[2]<=59&&b[3]<=59)||!1},isValidIPv4:function(a){var b=
a.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||!1},isValidCurrency:function(a){return a.match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&&!0||!1},isValidSSN:function(a){return a.match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(a){return a.match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation;

//v.3.6 build 130619

/*
CopyrigDinamenta, UABTD. http://www.dhtmlx.com
You allowed to use this component or parts of it under GPL terms
To use it on other terms or get Professional edition of the component please contact us at sales@dhtmlx.com
*/