<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" href="../codebase/default.css" type="text/css" media="screen" title="no title" charset="utf-8"><title>
    offline_storage    [DHX documentation]
  </title></head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
    <a class="logo" href="http://dhtmlx.com" title="DHTMLX Home Page"></a>
    <span class="tittle-dhtmlx">DHTMLX Docs & Samples Explorer</span>

    <div class="search-field">
        <form action="/dhtmlx/docs/doku.php" accept-charset="utf-8" id="dw__search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" title="Search" /><button type="submit"></button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>    </div>
        <div class="buttons">
                <a class="doc"></a>
                <a title="DHTMLX Samples homepage" href="../samples.html" class="sample"/></a>
        </div>
     <!-- <div class="pagename">
        [[<a href="#"  title="Backlinks">offline_storage</a>]]
      </div>
      <div class="logo">
        <a href="/dhtmlx/docs/doku.php"  name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[H]">DHX documentation</a>      </div>

      <div class="clearer"></div>-->
        
    </div>

    
<!--   <div class="bar" id="bar__top">
      <div class="bar-left" id="bar__topleft">
        <form class="button btn_edit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit this page" class="button" accesskey="e" title="Edit this page [E]" /></div></form>        <form class="button btn_revs" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>      </div>

      <div class="bar-right" id="bar__topright">
        <form class="button btn_recent" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Recent changes" class="button" accesskey="r" title="Recent changes [R]" /></div></form>        <form action="/dhtmlx/docs/doku.php" accept-charset="utf-8" id="dw__search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" title="Search" /><button type="submit"></button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>&nbsp;
      </div>

      <div class="clearer"></div>
    </div> -->

<!--        <div class="breadcrumbs">
      <span class="bchead">Trace:</span> <span class="bcsep">&raquo;</span> <span class="curid"><a href="/dhtmlx/docs/doku.php?id=offline_storage"  class="breadcrumbs" title="offline_storage">offline_storage</a></span>    </div>
    -->

    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <!-- TOC START -->
<div class="toc">
<div class="tocheader toctoggle" id="toc__header">Table of Contents</div>
<div id="toc__inside">

<ul class="toc">
<li class="level1"><div class="li"><span class="li"><a href="#dhx.proxyoffline_storage" class="toc">dhx.proxy: offline storage</a></span></div>
<ul class="toc">
<li class="clear">

<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="#initialization" class="toc">Initialization</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#dhx.proxy_and_dhx.dataprocessor" class="toc">dhx.proxy and dhx.DataProcessor</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#dhx.proxy_and_ajax" class="toc">dhx.proxy and Ajax</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="#learning_in_practice" class="toc">Learning in practice</a></span></div></li></ul>
</li></ul>
</li></ul>
</div>
</div>
<!-- TOC END -->

<p>
<div class='backlinks'><div class='backlink'><a href="../index.html" class="wikilink1" title="start">Index</a></div></div>

</p>

<h1><a name="dhx.proxyoffline_storage" id="dhx.proxyoffline_storage">dhx.proxy: offline storage</a></h1>
<div class="level1">

</div>

<h4><a name="what_is_dhx.proxy" id="what_is_dhx.proxy">What is dhx.proxy?</a></h4>
<div class="level4">

<p>

<strong>dhx.proxy</strong> is a DHTMLX component allowing you to send web requests via the proxy object. It defines a &#039;medium&#039; data storage (cookie, session or local) that will keep the latest successful data files (further referred as &#039;the latest copy&#039;) and unsuccessful web requests.
</p>

<p>
<img src="dhx.proxy_image.png"  class="media" title="{{:dhx.proxy_image.png|" alt="{{:dhx.proxy_image.png|" />

</p>

</div>

<h4><a name="what_components_can_dhx.proxy_be_used_with" id="what_components_can_dhx.proxy_be_used_with">What components can dhx.proxy be used with?</a></h4>
<div class="level4">

<p>
You can use dhx.proxy together with 4 components: 
</p>
<ol>
<li class="level1"><div class="li"> <a href="../dhtmlxgrid/index.html" class="wikilink1" title="dhtmlxgrid:toc">Grid</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.dhtmlx.com/doku.php?id=dhtmlxtreegrid:toc" class="wikilink1" title="dhtmlxtreegrid:toc">TreeGrid</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:toc" class="wikilink1" title="dhtmlxscheduler:toc">Scheduler</a></div>
</li>
<li class="level1"><div class="li"> <a href="index.html" class="wikilink1" title="dhtmlxdataview:toc">Dataview</a></div>
</li>
</ol>

</div>

<h4><a name="how_does_an_application_with_dhx.proxy_work" id="how_does_an_application_with_dhx.proxy_work">How does an application with dhx.proxy work?</a></h4>
<div class="level4">

</div>

<h5><a name="loading_data" id="loading_data">Loading data</a></h5>
<div class="level5">
<ul>
<li class="level1"><div class="li"> Each time data needs loading, the app passes a request to the server via proxy-server. If the server is available - data is loaded from it and cached as the latest copy. If the server is unavailable, data is loaded from the local storage. </div>
</li>
<li class="level1"><div class="li"> Note that the local storage will contain some data only if the app has been run before with the available internet connection at least once.</div>
</li>
</ul>

</div>

<h5><a name="crud_operations" id="crud_operations">CRUD operations</a></h5>
<div class="level5">
<ul>
<li class="level1"><div class="li"> When a user makes a request on update, it (the request) is passed to the server via proxy-server. If the request is satisfied - it updates the latest copy. If the request isn&#039;t satisfied - it&#039;s cached in the local storage.  </div>
</li>
<li class="level1"><div class="li"> Each time a user makes a request, <strong>dhx.proxy</strong> checks presence of unsuccessful requests in the local storage. If there are any kept - they are passed to the server.</div>
</li>
<li class="level1"><div class="li"> As soon as an unsuccessful request is satisfied - it updates the latest copy and the latest copy is removed from the local storage.</div>
</li>
</ul>

<p>

<div class='dhx_note'><div class='dhx_note_img'>&nbsp;</div>
To cache not only the entered data, but also the application resources (js, css files, images etc.) you may use dhx.proxy together with the ApplicationCache interface (HTML5 feature).
</div>

</p>

</div>

<h4><a name="how_to_use_dhx.proxy" id="how_to_use_dhx.proxy">How to use dhx.proxy?</a></h4>
<div class="level4">

<p>
<strong>dhx.proxy</strong> is an easy-to-use component. All you need to do is to instantiate it and specify the instance as the <strong>url</strong> parameter of the component(s) that will take data from the server. 
</p>
<pre class="code javascript"><span class="kw2">var</span> source <span class="sy0">=</span> <span class="kw2">new</span> dhx.<span class="me1">proxy</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
	  url<span class="sy0">:</span> <span class="st0">&quot;./data.php&quot;</span><span class="sy0">,</span>
	  storage<span class="sy0">:</span> dhx.<span class="me1">storage</span>.<span class="me1">cookie</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span>;
&nbsp;
mygrid <span class="sy0">=</span> <span class="kw2">new</span> dhtmlXGridObject<span class="br0">&#40;</span><span class="st0">'gridbox'</span><span class="br0">&#41;</span>;
...
<span class="me1">mygrid</span>.<span class="me1">load</span><span class="br0">&#40;</span>source<span class="br0">&#41;</span>;</pre>
</div>
<div class="secedit"><form class="button btn_secedit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="lines" value="38-2282" /><input type="hidden" name="rev" value="1346252040" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit" class="button" title="dhx.proxy: offline storage" /></div></form></div>
<h3><a name="initialization" id="initialization">Initialization</a></h3>
<div class="level3">

<p>
<strong>dhx.proxy</strong> can be initialized in the following way:

</p>
<pre class="code javascript"><span class="kw2">var</span> source <span class="sy0">=</span> <span class="kw2">new</span> dhx.<span class="me1">proxy</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
	  url<span class="sy0">:</span> <span class="st0">&quot;./data.php&quot;</span><span class="sy0">,</span>
	  storage<span class="sy0">:</span> dhx.<span class="me1">storage</span>.<span class="me1">session</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span>;</pre>
<p>

The constructor takes 2 parameters:
</p>
<ul>
<li class="level1"><div class="li"> <strong>url</strong> - (<em>url</em>) the datafeed url. If you use dhtmlxConnector, the path to its file can be set as this parameter.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <strong>storage</strong> - (<em>dhx.storage.local</em>, <em>dhx.storage.session</em>, <em>dhx.storage.cookie</em>) specifies the data storage type. It&#039;s an optional parameter. The default value - <em>dhx.storage.local</em>.</div>
</li>
</ul>

<p>

<div class='dhx_note'><div class='dhx_note_img'>&nbsp;</div>
To use the functionality of dhx.proxy you should add to your HTML page 2 extra files: 'proxy.js' and 'offline.js'.
</div>
</p>

</div>
<div class="secedit"><form class="button btn_secedit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="lines" value="2283-2960" /><input type="hidden" name="rev" value="1346252040" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit" class="button" title="Initialization" /></div></form></div>
<h3><a name="dhx.proxy_and_dhx.dataprocessor" id="dhx.proxy_and_dhx.dataprocessor">dhx.proxy and dhx.DataProcessor</a></h3>
<div class="level3">

<p>
If for connecting to the server you use <a href="../dhtmlxdataprocessor/index.html" class="wikilink1" title="dhtmlxdataprocessor:toc">dataProcessor</a>, you should specify the <strong>dhx.proxy</strong> instance in the constructor. After this, all web requests start to be passed to the server through proxy.

</p>
<pre class="code javascript"><span class="kw2">var</span> source <span class="sy0">=</span> <span class="kw2">new</span> dhx.<span class="me1">proxy</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
	  url<span class="sy0">:</span> <span class="st0">&quot;./data.php&quot;</span><span class="sy0">,</span>
	  storage<span class="sy0">:</span> dhx.<span class="me1">storage</span>.<span class="me1">cookie</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span>;
&nbsp;
mygrid <span class="sy0">=</span> <span class="kw2">new</span> dhtmlXGridObject<span class="br0">&#40;</span><span class="st0">'gridbox'</span><span class="br0">&#41;</span>;
...
<span class="me1">mygrid</span>.<span class="me1">load</span><span class="br0">&#40;</span>source<span class="br0">&#41;</span>;	
&nbsp;
myDataProcessor <span class="sy0">=</span> <span class="kw2">new</span> dataProcessor<span class="br0">&#40;</span>source<span class="br0">&#41;</span>;
myDataProcessor.<span class="me1">init</span><span class="br0">&#40;</span>mygrid<span class="br0">&#41;</span>;</pre>
</div>
<div class="secedit"><form class="button btn_secedit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="lines" value="2961-3484" /><input type="hidden" name="rev" value="1346252040" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit" class="button" title="dhx.proxy and dhx.DataProcessor" /></div></form></div>
<h3><a name="dhx.proxy_and_ajax" id="dhx.proxy_and_ajax">dhx.proxy and Ajax</a></h3>
<div class="level3">

<p>
In case you don&#039;t use <a href="../dhtmlxdataprocessor/index.html" class="wikilink1" title="dhtmlxdataprocessor:toc">dataProcessor</a> and &#039;write&#039; the server-client logic manually, you will need these 2 methods:
</p>
<ul>
<li class="level1"><div class="li"> <strong>post</strong></div>
</li>
<li class="level1"><div class="li"> <strong>get</strong></div>
</li>
</ul>

<p>

The methods work like normal Ajax GET and POST requests.

</p>
<pre class="code javascript"><span class="kw2">var</span> source <span class="sy0">=</span> <span class="kw2">new</span> dhx.<span class="me1">proxy</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
	  url<span class="sy0">:</span> <span class="st0">&quot;./data.php&quot;</span><span class="sy0">,</span>
	  storage<span class="sy0">:</span> dhx.<span class="me1">storage</span>.<span class="me1">cookie</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span>;
&nbsp;
mygrid <span class="sy0">=</span> <span class="kw2">new</span> dhtmlXGridObject<span class="br0">&#40;</span><span class="st0">'gridbox'</span><span class="br0">&#41;</span>;
....
<span class="me1">mygrid</span>.<span class="me1">load</span><span class="br0">&#40;</span>source<span class="br0">&#41;</span>;
&nbsp;
<span class="kw2">var</span> params <span class="sy0">=</span> <span class="br0">&#91;</span><span class="st0">&quot;a=1&quot;</span><span class="sy0">,</span> <span class="st0">&quot;b=2&quot;</span><span class="br0">&#93;</span>; <span class="co1">// request parameters list</span>
&nbsp;
source.<span class="me1">post</span><span class="br0">&#40;</span> params.<span class="me1">join</span><span class="br0">&#40;</span><span class="st0">'&amp;'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="br0">&#123;</span>
				success<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
					moveItem<span class="br0">&#40;</span>id<span class="sy0">,</span> $$<span class="br0">&#40;</span><span class="st0">'mylist'</span><span class="br0">&#41;</span><span class="sy0">,</span> $$<span class="br0">&#40;</span><span class="st0">'ready_list'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
				<span class="br0">&#125;</span><span class="sy0">,</span>
				error<span class="sy0">:</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
					moveItem<span class="br0">&#40;</span>id<span class="sy0">,</span> $$<span class="br0">&#40;</span><span class="st0">'mylist'</span><span class="br0">&#41;</span><span class="sy0">,</span> $$<span class="br0">&#40;</span><span class="st0">'proxy_list'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
				<span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span>;</pre>
</div>
<div class="secedit"><form class="button btn_secedit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="lines" value="3485-4179" /><input type="hidden" name="rev" value="1346252040" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit" class="button" title="dhx.proxy and Ajax" /></div></form></div>
<h3><a name="learning_in_practice" id="learning_in_practice">Learning in practice</a></h3>
<div class="level3">

<p>
To make it easy to learn the topic, you can go through step-by-step tutorial - <strong><a href="http://docs.dhtmlx.com/doku.php?id=tutorials:offline_storage_tutorial" class="wikilink1" title="tutorials:offline_storage_tutorial">Making apps work offline</a></strong>.
</p>

<p>
As you follow the tutorial, you will create a simple grid linked to db that continues to run and be updated even when the app doesn&#039;t have connection to Internet.

</p>

</div>
<div class="secedit"><form class="button btn_secedit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="lines" value="4180-" /><input type="hidden" name="rev" value="1346252040" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit" class="button" title="Learning in practice" /></div></form></div>
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
     <!-- <div class="doc">
        offline_storage.txt &middot; Last modified: 2012/08/29 18:54 (external edit)      </div>
    </div>-->

   
    <!--<div class="bar" id="bar__bottom">-->
      <!--<div class="bar-left" id="bar__bottomleft">-->
        <!--<form class="button btn_edit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit this page" class="button" accesskey="e" title="Edit this page [E]" /></div></form>-->
        <!--<form class="button btn_revs" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]" /></div></form>-->
      <!--</div>-->
      <!--<div class="bar-right" id="bar__bottomright">-->
        <!---->
        <!---->
        <!---->
        <!---->
        <!---->
        <!--<form class="button btn_index" method="get" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Index" class="button" accesskey="x" title="Index [X]" /></div></form>-->
        <!--<a class="nolink" href="#dokuwiki__top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" title="Back to top" /></a>&nbsp;-->
      <!--</div>-->
      <!--<div class="clearer"></div>-->
    <!--</div>-->

  </div>

  

</div>

<div class="footerinc">


</div>

<div class="no"><img src="/dhtmlx/docs/lib/exe/indexer.php?id=offline_storage&amp;1366131662" width="1" height="1" alt=""  /></div>
     <div class="footer">
        <div class="footer-logo"></div>
        <div class="copyright">Copyright Â© 1998-2011 Dinamenta, UAB<br />All rights reserved.</div>
        <form class="button btn_edit" method="post" action="/dhtmlx/docs/doku.php"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="offline_storage" /><input type="submit" value="Edit this page" class="button" accesskey="e" title="Edit this page [E]" /></div></form>    	    </div>
</body>
</html>
